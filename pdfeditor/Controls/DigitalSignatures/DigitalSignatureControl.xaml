<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:local="clr-namespace:pdfeditor.Controls.DigitalSignatures" xmlns:behavior="http://schemas.microsoft.com/xaml/behaviors" xmlns:utils2="clr-namespace:pdfeditor.Utils" xmlns:global="clr-namespace:System.Globalization;assembly=mscorlib" xmlns:converters="clr-namespace:pdfeditor.Utils.Converters" xmlns:localprop="clr-namespace:pdfeditor.Properties">
	<Style
		x:Key="{x:Type local:DigitalSignatureControl}"
		TargetType="{x:Type local:DigitalSignatureControl}">
		<Setter
			Property="HorizontalAlignment"
			Value="Stretch" />
		<Setter
			Property="VerticalAlignment"
			Value="Stretch" />
		<Setter
			Property="Template">
			<Setter.Value>
				<ControlTemplate
					TargetType="{x:Type local:DigitalSignatureControl}">
					<Grid
						x:Name="LayoutRoot">
						<FrameworkElement.Resources>
							<ResourceDictionary>
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.Static.Stroke"
									Color="#888888" />
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.Static.Fill"
									Color="#888888" />
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.MouseOver.Stroke"
									Color="#888888" />
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.MouseOver.Fill"
									Color="#888888" />
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.Static.Checked.Stroke"
									Color="#888888" />
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.Static.Checked.Fill"
									Color="#888888" />
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.MouseOver.Checked.Stroke"
									Color="#888888" />
								<SolidColorBrush
									x:Key="DigitalSignatureArrow.MouseOver.Checked.Fill"
									Color="#888888" />
								<PathGeometry
									x:Key="DigitalSignatureArrow">
									<PathGeometry.Figures>
										<PathFigureCollection>
											<PathFigure
												IsFilled="True"
												StartPoint="0 0"
												IsClosed="True">
												<PathFigure.Segments>
													<PathSegmentCollection>
														<LineSegment
															Point="0 6" />
														<LineSegment
															Point="6 0" />
													</PathSegmentCollection>
												</PathFigure.Segments>
											</PathFigure>
										</PathFigureCollection>
									</PathGeometry.Figures>
								</PathGeometry>
								<Style
									x:Key="DigitalSignatureExpandCollapseToggleStyle"
									TargetType="{x:Type ToggleButton}">
									<Setter
										Property="Background"
										Value="#00FFFFFF" />
									<Setter
										Property="Template">
										<Setter.Value>
											<ControlTemplate
												TargetType="{x:Type ToggleButton}">
												<Grid
													Background="{TemplateBinding Control.Background}">
													<Grid.ColumnDefinitions>
														<ColumnDefinition
															Width="Auto" />
														<ColumnDefinition
															Width="4" />
														<ColumnDefinition
															Width="*" />
													</Grid.ColumnDefinitions>
													<Border
														Width="16"
														Height="16"
														Background="#00FFFFFF"
														Padding="5,5,5,5">
														<Path
															x:Name="ExpandPath"
															Fill="{StaticResource DigitalSignatureArrow.Static.Fill}"
															Stroke="{StaticResource DigitalSignatureArrow.Static.Stroke}"
															Data="{StaticResource DigitalSignatureArrow}">
															<UIElement.RenderTransform>
																<RotateTransform
																	Angle="135"
																	CenterX="3"
																	CenterY="3" />
															</UIElement.RenderTransform>
														</Path>
													</Border>
													<ContentPresenter
														Grid.Column="2"
														ContentSource="Content"
														HorizontalAlignment="Left"
														VerticalAlignment="Center" />
												</Grid>
												<ControlTemplate.Triggers>
													<Trigger
														Property="ToggleButton.IsChecked"
														Value="True">
														<Setter
															TargetName="ExpandPath"
															Property="RenderTransform">
															<Setter.Value>
																<RotateTransform
																	Angle="180"
																	CenterX="3"
																	CenterY="3" />
															</Setter.Value>
														</Setter>
														<Setter
															TargetName="ExpandPath"
															Property="Shape.Fill"
															Value="{StaticResource DigitalSignatureArrow.Static.Checked.Fill}" />
														<Setter
															TargetName="ExpandPath"
															Property="Shape.Stroke"
															Value="{StaticResource DigitalSignatureArrow.Static.Checked.Stroke}" />
													</Trigger>
													<Trigger
														Property="UIElement.IsMouseOver"
														Value="True">
														<Setter
															TargetName="ExpandPath"
															Property="Shape.Stroke"
															Value="{StaticResource DigitalSignatureArrow.MouseOver.Stroke}" />
														<Setter
															TargetName="ExpandPath"
															Property="Shape.Fill"
															Value="{StaticResource DigitalSignatureArrow.MouseOver.Fill}" />
													</Trigger>
													<MultiTrigger>
														<MultiTrigger.Conditions>
															<Condition
																Property="UIElement.IsMouseOver"
																Value="True" />
															<Condition
																Property="ToggleButton.IsChecked"
																Value="True" />
														</MultiTrigger.Conditions>
														<Setter
															TargetName="ExpandPath"
															Property="Shape.Stroke"
															Value="{StaticResource DigitalSignatureArrow.MouseOver.Checked.Stroke}" />
														<Setter
															TargetName="ExpandPath"
															Property="Shape.Fill"
															Value="{StaticResource DigitalSignatureArrow.MouseOver.Checked.Fill}" />
													</MultiTrigger>
												</ControlTemplate.Triggers>
											</ControlTemplate>
										</Setter.Value>
									</Setter>
								</Style>
								<Style
									x:Key="DigitalSignatureExpanderStyle"
									TargetType="{x:Type Expander}">
									<Setter
										Property="Foreground"
										Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
									<Setter
										Property="Background"
										Value="#00FFFFFF" />
									<Setter
										Property="HorizontalContentAlignment"
										Value="Stretch" />
									<Setter
										Property="VerticalContentAlignment"
										Value="Stretch" />
									<Setter
										Property="BorderBrush"
										Value="#00FFFFFF" />
									<Setter
										Property="BorderThickness"
										Value="1" />
									<Setter
										Property="Template">
										<Setter.Value>
											<ControlTemplate
												TargetType="{x:Type Expander}">
												<Border
													BorderBrush="{TemplateBinding Control.BorderBrush}"
													BorderThickness="{TemplateBinding Control.BorderThickness}"
													Background="{TemplateBinding Control.Background}"
													CornerRadius="3"
													SnapsToDevicePixels="True">
													<DockPanel>
														<ToggleButton
															x:Name="HeaderSite"
															DockPanel.Dock="Top"
															Margin="1"
															MinWidth="0"
															MinHeight="0"
															Content="{TemplateBinding HeaderedContentControl.Header}"
															ContentTemplate="{TemplateBinding HeaderedContentControl.HeaderTemplate}"
															ContentTemplateSelector="{TemplateBinding HeaderedContentControl.HeaderTemplateSelector}"
															Foreground="{TemplateBinding Control.Foreground}"
															Padding="{TemplateBinding Control.Padding}"
															FontFamily="{TemplateBinding Control.FontFamily}"
															FontSize="{TemplateBinding Control.FontSize}"
															FontStyle="{TemplateBinding Control.FontStyle}"
															FontStretch="{TemplateBinding Control.FontStretch}"
															FontWeight="{TemplateBinding Control.FontWeight}"
															HorizontalContentAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
															VerticalContentAlignment="{TemplateBinding Control.VerticalContentAlignment}"
															Style="{StaticResource DigitalSignatureExpandCollapseToggleStyle}"
															IsChecked="{Binding Path=IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" />
														<ContentPresenter
															x:Name="ExpandSite"
															DockPanel.Dock="Bottom"
															Visibility="Collapsed"
															Focusable="False"
															HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
															VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"
															Margin="{TemplateBinding Control.Padding}" />
													</DockPanel>
												</Border>
												<ControlTemplate.Triggers>
													<Trigger
														Property="Expander.IsExpanded"
														Value="True">
														<Setter
															TargetName="ExpandSite"
															Property="Visibility"
															Value="Visible" />
													</Trigger>
													<Trigger
														Property="Expander.ExpandDirection"
														Value="Right" />
													<Trigger
														Property="Expander.ExpandDirection"
														Value="Up" />
													<Trigger
														Property="Expander.ExpandDirection"
														Value="Left" />
													<Trigger
														Property="IsEnabled"
														Value="False">
														<Setter
															Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
															Property="Foreground" />
													</Trigger>
												</ControlTemplate.Triggers>
											</ControlTemplate>
										</Setter.Value>
									</Setter>
								</Style>
							</ResourceDictionary>
						</FrameworkElement.Resources>
						<ScrollViewer
							VerticalScrollBarVisibility="Auto">
							<HeaderedItemsControl
								x:Name="InternalList">
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<Grid>
											<FrameworkElement.Resources>
												<ResourceDictionary>
													<converters:BooleanToVisibilityConverter
														x:Key="BooleanToVisibilityConverter" />
													<converters:BooleanToVisibilityReverseConverter
														x:Key="BooleanToVisibilityReverseConverter" />
												</ResourceDictionary>
											</FrameworkElement.Resources>
											<FrameworkElement.ContextMenu>
												<ContextMenu>
													<MenuItem
														Header="{x:Static localprop:Resources.DigSignPanelContextMenuUnsignedSignNow}"
														Command="{Binding SignDeferredSignatureCommand}"
														Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityReverseConverter}}" />
													<MenuItem
														Header="{x:Static localprop:Resources.DigSignPanelContextMenuUnsignedShowProps}"
														Command="{Binding ShowDeferredSignaturePropertiesCommand}"
														Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityReverseConverter}}" />
													<MenuItem
														Header="{x:Static localprop:Resources.DigSignPanelContextMenuGoToField}"
														Command="{Binding GoToFieldLocationCommand}" />
													<MenuItem
														Header="{x:Static localprop:Resources.DigSignPanelContextMenuValidateSign}"
														Command="{Binding ValidateSignatureCommand}"
														Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityConverter}}" />
													<MenuItem
														Header="{x:Static localprop:Resources.DigSignPanelContextMenuShowProps}"
														Command="{Binding ShowSignaturePropertiesCommand}"
														Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityConverter}}" />
													<Separator
														Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityReverseConverter}}" />
													<MenuItem
														Header="{x:Static localprop:Resources.DigSignPanelContextMenuUnsignedRemove}"
														Command="{Binding RemoveDeferredSignatureCommand}"
														Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityReverseConverter}}" />
												</ContextMenu>
											</FrameworkElement.ContextMenu>
											<Expander
												Margin="4,0,4,0"
												Foreground="{DynamicResource TextBrushWhiteAndBlack}"
												Style="{StaticResource DigitalSignatureExpanderStyle}">
												<behavior:Interaction.Triggers>
													<behavior:EventTrigger
														EventName="Expanded">
														<behavior:InvokeCommandAction
															Command="{Binding ValidateSignatureFirstTimeCommand}" />
													</behavior:EventTrigger>
													<behavior:EventTrigger
														EventName="MouseDoubleClick">
														<behavior:InvokeCommandAction
															Command="{Binding ValidateSignatureCommand}" />
													</behavior:EventTrigger>
												</behavior:Interaction.Triggers>
												<HeaderedContentControl.Header>
													<StackPanel
														Orientation="Horizontal">
														<Viewbox
															Margin="0,0,4,0"
															Width="16"
															Height="16"
															VerticalAlignment="Center">
															<Grid
																Width="32"
																Height="32">
																<local:DigitalSignatureValidationIcon
																	ValidationResult="{Binding Result}" />
															</Grid>
														</Viewbox>
														<TextBlock
															Margin="0,4"
															Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityConverter}}">
															<Run
																Text="{x:Static localprop:Resources.DigSignPropSignedBy}" />
															<Run
																Text=" " />
															<Run
																Text="{Binding SignedName, Mode=OneWay}" />
														</TextBlock>
														<TextBlock
															Margin="0,4"
															Text="{x:Static localprop:Resources.DigSignPropUnsigned}"
															Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityReverseConverter}}" />
													</StackPanel>
												</HeaderedContentControl.Header>
												<ContentControl.Content>
													<StackPanel
														Orientation="Vertical"
														Margin="21,0,0,0"
														Background="#00FFFFFF">
														<behavior:Interaction.Triggers>
															<behavior:EventTrigger
																EventName="MouseLeftButtonDown">
																<behavior:InvokeCommandAction
																	Command="{Binding GoToFieldLocationCommand}" />
															</behavior:EventTrigger>
														</behavior:Interaction.Triggers>
														<TextBlock
															Margin="0,0,0,4"
															TextWrapping="Wrap"
															Visibility="{Binding SignPropertiesTextVisibility}">
															<Run
																Text="{Binding SignValidatePropertiesText}" />
														</TextBlock>
														<TextBlock
															Margin="16,0,0,4"
															TextWrapping="Wrap"
															Visibility="{Binding SignPropertiesTextVisibility}"
															Text="{Binding SignPropertiesText}" />
														<TextBlock
															Margin="0,0,0,4"
															TextWrapping="Wrap"
															Visibility="{Binding IsFieldPageVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
															<Hyperlink
																Command="{Binding GoToFieldLocationCommand}">
																<Run
																	Text="{x:Static localprop:Resources.DigSignFieldLocation}" />
																<Run
																	Text="{Binding Name, Mode=OneWay}" />
																<Run
																	Text=" " />
																<Run
																	Text="{x:Static localprop:Resources.DigSignFieldLocationPage}" />
																<Run
																	Text="{Binding DisplayLocationPageIndex, Mode=OneWay}" />
															</Hyperlink>
														</TextBlock>
														<TextBlock
															Margin="0,0,0,4"
															TextWrapping="Wrap"
															Visibility="{Binding IsFieldPageVisible, Converter={StaticResource BooleanToVisibilityReverseConverter}}">
															<Hyperlink
																Command="{Binding GoToFieldLocationCommand}">
																<Run
																	Text="{x:Static localprop:Resources.DigSignFieldLocation}" />
																<Run
																	Text="{Binding Name, Mode=OneWay}" />
															</Hyperlink>
														</TextBlock>
														<TextBlock
															Margin="0,0,0,4"
															TextWrapping="Wrap"
															Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityConverter}}">
															<Run
																Text="{x:Static localprop:Resources.DigSignPropLastCheckTime}" />
															<Run
																Text="{Binding Field.LastValidateTime, Mode=OneWay, ConverterCulture='{x:Static global:CultureInfo.CurrentUICulture}', StringFormat={}{0:G}}" />
														</TextBlock>
														<TextBlock
															Margin="0,0,0,4"
															TextWrapping="Wrap"
															Visibility="{Binding HasSigned, Converter={StaticResource BooleanToVisibilityConverter}}">
															<Hyperlink
																Command="{Binding ShowSignatureCertificateCommand}">
																<Run
																	Text="{x:Static localprop:Resources.DigSignPropCertDetails}" />
															</Hyperlink>
														</TextBlock>
													</StackPanel>
												</ContentControl.Content>
											</Expander>
										</Grid>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
							</HeaderedItemsControl>
						</ScrollViewer>
					</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
</ResourceDictionary>
