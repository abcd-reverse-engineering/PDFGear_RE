<Window
	x:Class="pdfconverter.Controls.ConvertProgressWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:commonLibCtrl="clr-namespace:CommonLib.Controls;assembly=CommonLib" xmlns:locprop="clr-namespace:pdfconverter.Properties" xmlns:converter="clr-namespace:pdfconverter.Utils.Converters" xmlns:local="clr-namespace:pdfconverter.Controls"
	WindowStyle="None"
	AllowsTransparency="True"
	ShowInTaskbar="False"
	Background="#FFFFFFFF"
	BorderBrush="#FFCCCCCC"
	BorderThickness="1"
	Padding="0"
	Height="200"
	Width="460"
	SizeToContent="Height">
	<FrameworkElement.Resources>
		<ResourceDictionary>
			<converter:BooleanToVisibilityConverter
				x:Key="BooleanToVisibilityConverter" />
			<SolidColorBrush
				x:Key="PrimaryDialogButton.Static.Background"
				Color="#EF5B52" />
			<SolidColorBrush
				x:Key="PrimaryDialogButton.Static.Border"
				Color="#FFEF5B52" />
			<SolidColorBrush
				x:Key="PrimaryDialogButton.Static.Foreground"
				Color="#FFFFFFFF" />
			<SolidColorBrush
				x:Key="DialogButton.Static.Background"
				Color="#FFFFFFFF" />
			<SolidColorBrush
				x:Key="DialogButton.Static.Border"
				Color="#FFBBBBBB" />
			<SolidColorBrush
				x:Key="DialogButton.Static.Foreground"
				Color="#FF000000" />
			<SolidColorBrush
				x:Key="DialogButton.Disabled.Background"
				Color="#FFF4F4F4" />
			<SolidColorBrush
				x:Key="DialogButton.Disabled.Border"
				Color="#FFF4F4F4" />
			<SolidColorBrush
				x:Key="DialogButton.Disabled.Foreground"
				Color="#FF838383" />
			<Style
				x:Key="DialogButtonFocusVisual">
				<Setter
					Property="Control.Template">
					<Setter.Value>
						<ControlTemplate>
							<Rectangle
								Margin="-1"
								SnapsToDevicePixels="False"
								Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
								StrokeThickness="1"
								RadiusX="2"
								RadiusY="2"
								Opacity="0.6" />
						</ControlTemplate>
					</Setter.Value>
				</Setter>
			</Style>
			<Style
				x:Key="DialogButtonStyle"
				TargetType="{x:Type ButtonBase}">
				<Setter
					Property="Background"
					Value="{StaticResource DialogButton.Static.Background}" />
				<Setter
					Property="BorderBrush"
					Value="{StaticResource DialogButton.Static.Border}" />
				<Setter
					Property="Foreground"
					Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
				<Setter
					Property="BorderThickness"
					Value="1" />
				<Setter
					Property="HorizontalContentAlignment"
					Value="Center" />
				<Setter
					Property="VerticalContentAlignment"
					Value="Center" />
				<Setter
					Property="VerticalAlignment"
					Value="Center" />
				<Setter
					Property="Padding"
					Value="8" />
				<Setter
					Property="MinWidth"
					Value="80" />
				<Setter
					Property="MinHeight"
					Value="32" />
				<Setter
					Property="FrameworkElement.FocusVisualStyle"
					Value="{StaticResource DialogButtonFocusVisual}" />
				<Setter
					Property="Template">
					<Setter.Value>
						<ControlTemplate
							TargetType="{x:Type ButtonBase}">
							<Border
								x:Name="border"
								CornerRadius="2"
								BorderThickness="{TemplateBinding Control.BorderThickness}"
								Background="{TemplateBinding Control.Background}"
								BorderBrush="{TemplateBinding Control.BorderBrush}"
								SnapsToDevicePixels="True">
								<Grid>
									<Rectangle
										x:Name="BackgroundBorder"
										HorizontalAlignment="Stretch"
										VerticalAlignment="Stretch"
										Fill="#FF000000"
										Opacity="0"
										SnapsToDevicePixels="False"
										RadiusX="2"
										RadiusY="2" />
									<ContentPresenter
										x:Name="contentPresenter"
										RecognizesAccessKey="True"
										Margin="{TemplateBinding Control.Padding}"
										SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}"
										HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
										VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"
										Focusable="False" />
								</Grid>
							</Border>
							<ControlTemplate.Triggers>
								<Trigger
									Property="UIElement.IsMouseOver"
									Value="True">
									<Setter
										TargetName="BackgroundBorder"
										Property="UIElement.Opacity"
										Value="0.04" />
								</Trigger>
								<Trigger
									Property="IsPressed"
									Value="True">
									<Setter
										TargetName="BackgroundBorder"
										Property="UIElement.Opacity"
										Value="0.12" />
								</Trigger>
								<Trigger
									Property="IsEnabled"
									Value="False">
									<Setter
										TargetName="border"
										Property="Border.Background"
										Value="{StaticResource DialogButton.Disabled.Background}" />
									<Setter
										TargetName="border"
										Property="Border.BorderBrush"
										Value="{StaticResource DialogButton.Disabled.Border}" />
									<Setter
										TargetName="contentPresenter"
										Property="TextElement.Foreground"
										Value="{StaticResource DialogButton.Disabled.Foreground}" />
								</Trigger>
								<MultiTrigger>
									<MultiTrigger.Conditions>
										<Condition
											Property="Button.IsDefault"
											Value="True" />
									</MultiTrigger.Conditions>
									<Setter
										Property="Background"
										Value="{StaticResource PrimaryDialogButton.Static.Background}" />
									<Setter
										Property="BorderBrush"
										Value="{StaticResource PrimaryDialogButton.Static.Border}" />
									<Setter
										Property="Foreground"
										Value="{StaticResource PrimaryDialogButton.Static.Foreground}" />
								</MultiTrigger>
							</ControlTemplate.Triggers>
						</ControlTemplate>
					</Setter.Value>
				</Setter>
			</Style>
		</ResourceDictionary>
	</FrameworkElement.Resources>
	<Control.Template>
		<ControlTemplate
			TargetType="{x:Type Window}">
			<Border>
				<VisualStateManager.VisualStateGroups>
					<VisualStateGroup
						x:Name="ProgressModeStates">
						<VisualState
							x:Name="BarMode" />
						<VisualState
							x:Name="RingMode">
							<Storyboard>
								<ObjectAnimationUsingKeyFrames
									Storyboard.TargetName="ProgressRing"
									Storyboard.TargetProperty="Visibility"
									Duration="0">
									<DiscreteObjectKeyFrame
										KeyTime="0"
										Value="{x:Static Visibility.Visible}" />
								</ObjectAnimationUsingKeyFrames>
								<BooleanAnimationUsingKeyFrames
									Storyboard.TargetName="ProgressRing"
									Storyboard.TargetProperty="IsActive"
									Duration="0">
									<DiscreteBooleanKeyFrame
										KeyTime="0"
										Value="True" />
								</BooleanAnimationUsingKeyFrames>
								<ObjectAnimationUsingKeyFrames
									Storyboard.TargetName="ProgressBar"
									Storyboard.TargetProperty="Visibility"
									Duration="0">
									<DiscreteObjectKeyFrame
										KeyTime="0"
										Value="{x:Static Visibility.Collapsed}" />
								</ObjectAnimationUsingKeyFrames>
							</Storyboard>
						</VisualState>
					</VisualStateGroup>
					<VisualStateGroup
						x:Name="CancelStates">
						<VisualState
							x:Name="CanCancel" />
						<VisualState
							x:Name="CannotCancel">
							<Storyboard>
								<BooleanAnimationUsingKeyFrames
									Storyboard.TargetName="CancelButton"
									Storyboard.TargetProperty="IsEnabled"
									Duration="0">
									<DiscreteBooleanKeyFrame
										KeyTime="0"
										Value="False" />
								</BooleanAnimationUsingKeyFrames>
								<ObjectAnimationUsingKeyFrames
									Storyboard.TargetName="CancelButton"
									Storyboard.TargetProperty="Visibility"
									Duration="0">
									<DiscreteObjectKeyFrame
										KeyTime="0"
										Value="{x:Static Visibility.Collapsed}" />
								</ObjectAnimationUsingKeyFrames>
							</Storyboard>
						</VisualState>
					</VisualStateGroup>
				</VisualStateManager.VisualStateGroups>
				<Grid
					Margin="16,12,16,20">
					<Border
						CornerRadius="8"
						Background="{TemplateBinding Control.Background}"
						BorderBrush="{TemplateBinding Control.BorderBrush}"
						BorderThickness="{TemplateBinding Control.BorderThickness}">
						<UIElement.Effect>
							<DropShadowEffect
								BlurRadius="16"
								ShadowDepth="4"
								Direction="270"
								Color="Black"
								Opacity="0.2"
								RenderingBias="Performance" />
						</UIElement.Effect>
					</Border>
					<Grid
						Margin="12,8"
						MinHeight="40">
						<Grid.RowDefinitions>
							<RowDefinition
								x:Name="TitleRow"
								Height="Auto" />
							<RowDefinition
								Height="*" />
							<RowDefinition
								Height="auto" />
						</Grid.RowDefinitions>
						<TextBlock
							x:Name="TitleBlock"
							Margin="0,0,0,4"
							Text="{TemplateBinding Window.Title}"
							Foreground="{DynamicResource {x:Static SystemColors.ActiveCaptionTextBrushKey}}" />
						<Button
							x:Name="CancelButton"
							IsCancel="True"
							HorizontalAlignment="Right"
							VerticalAlignment="Top"
							Grid.RowSpan="2"
							Style="{StaticResource DialogButtonStyle}"
							Width="20"
							Height="20"
							Padding="5"
							Margin="0,-4,-8,0"
							MinWidth="0"
							MinHeight="0"
							BorderThickness="0">
							<Viewbox
								Stretch="Uniform"
								HorizontalAlignment="Stretch"
								VerticalAlignment="Center">
								<Path
									Data="F1 M10,11.416016 L1.708984,19.707031 C1.513672,19.902344 1.279297,20 1.005859,20 C0.719401,20 0.480143,19.903971 0.288086,19.711914 C0.096029,19.519857 0,19.2806 0,18.994141 C0,18.720703 0.097656,18.486328 0.292969,18.291016 L8.583984,10 L0.292969,1.708984 C0.097656,1.513672 0,1.276043 0,0.996094 C0,0.859375 0.026042,0.729168 0.078125,0.605469 C0.130208,0.481771 0.201823,0.375977 0.292969,0.288086 C0.384115,0.200195 0.491536,0.130209 0.615234,0.078125 C0.738932,0.026043 0.869141,0 1.005859,0 C1.279297,0 1.513672,0.097656 1.708984,0.292969 L10,8.583984 L18.291016,0.292969 C18.486328,0.097656 18.723957,0 19.003906,0 C19.140625,0 19.269205,0.026043 19.389648,0.078125 C19.51009,0.130209 19.615885,0.201824 19.707031,0.292969 C19.798176,0.384115 19.869791,0.48991 19.921875,0.610352 C19.973957,0.730795 20,0.859375 20,0.996094 C20,1.276043 19.902344,1.513672 19.707031,1.708984 L11.416016,10 L19.707031,18.291016 C19.902344,18.486328 20,18.720703 20,18.994141 C20,19.130859 19.973957,19.261068 19.921875,19.384766 C19.869791,19.508463 19.799805,19.615885 19.711914,19.707031 C19.624023,19.798178 19.518229,19.869791 19.394531,19.921875 C19.270832,19.973959 19.140625,20 19.003906,20 C18.723957,20 18.486328,19.902344 18.291016,19.707031 Z"
									VerticalAlignment="Center"
									HorizontalAlignment="Center"
									Fill="{DynamicResource {x:Static SystemColors.ActiveCaptionTextBrushKey}}" />
							</Viewbox>
						</Button>
						<Grid
							Row="1"
							VerticalAlignment="Center"
							HorizontalAlignment="Stretch"
							Margin="0 10 0 0">
							<Grid.RowDefinitions>
								<RowDefinition
									x:Name="ContentRow"
									Height="Auto" />
								<RowDefinition
									x:Name="ProgressBarRow"
									Height="Auto" />
							</Grid.RowDefinitions>
							<Grid.ColumnDefinitions>
								<ColumnDefinition
									Width="Auto" />
								<ColumnDefinition
									Width="*" />
							</Grid.ColumnDefinitions>
							<Border
								Margin="{TemplateBinding Control.Padding}"
								Grid.Column="1">
								<AdornerDecorator>
									<ContentPresenter
										x:Name="ContentPresenter" />
								</AdornerDecorator>
							</Border>
							<commonLibCtrl:ProgressRing
								x:Name="ProgressRing"
								Width="44"
								Height="44"
								Margin="0,4,4,0"
								IsActive="False"
								Minimum="0"
								Maximum="1"
								Visibility="Collapsed"
								Value="{Binding Path=Value, RelativeSource={RelativeSource Mode=TemplatedParent}}"
								IsIndeterminate="{Binding Path=IsIndeterminate, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
							<commonLibCtrl:ProgressBar
								x:Name="ProgressBar"
								Grid.Row="1"
								Margin="0,4,0,0"
								Grid.ColumnSpan="2"
								HorizontalAlignment="Stretch"
								Minimum="0"
								Maximum="1"
								Value="{Binding Path=Value, RelativeSource={RelativeSource Mode=TemplatedParent}}"
								IsIndeterminate="{Binding Path=IsIndeterminate, RelativeSource={RelativeSource Mode=TemplatedParent}}" />
						</Grid>
						<Border
							BorderThickness="0 0.5 0 0"
							BorderBrush="#0000001F"
							Grid.Row="2"
							Margin="0 10 0 0"
							Visibility="{Binding Path=IsCancellable, Converter='{StaticResource BooleanToVisibilityConverter}', RelativeSource={RelativeSource Mode=TemplatedParent}}">
							<Button
								Style="{StaticResource DialogButtonStyle}"
								HorizontalAlignment="Right"
								Margin="0 15 20 10"
								Content="{x:Static locprop:Resources.OCRSettingsWindowCancelBtnContent}"
								IsCancel="True" />
						</Border>
					</Grid>
				</Grid>
			</Border>
			<ControlTemplate.Triggers>
				<Trigger
					Property="Window.Title"
					Value="">
					<Setter
						TargetName="TitleBlock"
						Property="UIElement.Visibility"
						Value="Collapsed" />
				</Trigger>
			</ControlTemplate.Triggers>
		</ControlTemplate>
	</Control.Template>
</Window>
