<Window
	x:Class="PDFLauncher.RecoverWindow" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:local="clr-namespace:PDFLauncher" xmlns:localprop="clr-namespace:PDFLauncher.Properties" xmlns:ViewModels="clr-namespace:PDFLauncher.ViewModels" xmlns:Models="clr-namespace:PDFLauncher.Models" xmlns:control="clr-namespace:PDFLauncher.CustomControl"
	WindowStartupLocation="CenterScreen"
	ResizeMode="NoResize"
	Background="{DynamicResource WindowsBackground}"
	Title="PDFgear"
	Height="495"
	Width="730"
	Loaded="Window_Loaded">
	<FrameworkElement.Resources>
		<ResourceDictionary>
			<Style
				x:Key="GridViewColumnHeaderGripper"
				TargetType="{x:Type Thumb}">
				<Setter
					Property="Canvas.Right"
					Value="0" />
				<Setter
					Property="Width"
					Value="5" />
				<Setter
					Property="Height"
					Value="{Binding Path=ActualHeight, RelativeSource={RelativeSource TemplatedParent}}" />
				<Setter
					Property="Padding"
					Value="0" />
				<Setter
					Property="Background"
					Value="{DynamicResource ListViewBackground}" />
				<Setter
					Property="Template">
					<Setter.Value>
						<ControlTemplate
							TargetType="{x:Type Thumb}">
							<Border
								Padding="{TemplateBinding Control.Padding}"
								Background="{DynamicResource ListViewBackground2}">
								<Rectangle
									HorizontalAlignment="Left"
									Width="1"
									Fill="{TemplateBinding Control.Background}" />
							</Border>
						</ControlTemplate>
					</Setter.Value>
				</Setter>
			</Style>
			<Style
				x:Key="{x:Type GridViewColumnHeader}"
				TargetType="{x:Type GridViewColumnHeader}">
				<Setter
					Property="Height"
					Value="32" />
				<Setter
					Property="Background"
					Value="{DynamicResource RecoverWindowGridViewBackground}" />
				<Setter
					Property="Margin"
					Value="0,0,0,0" />
				<Setter
					Property="HorizontalContentAlignment"
					Value="Stretch" />
				<Setter
					Property="Padding"
					Value="6,0,0,0" />
				<Setter
					Property="Template">
					<Setter.Value>
						<ControlTemplate
							TargetType="{x:Type GridViewColumnHeader}">
							<Grid>
								<Rectangle
									Fill="#00FFFFFF"
									IsHitTestVisible="True" />
								<Border
									x:Name="HeaderBorder"
									Padding="{TemplateBinding Control.Padding}"
									Background="{TemplateBinding Control.Background}"
									BorderThickness="{TemplateBinding Control.BorderThickness}"
									BorderBrush="{TemplateBinding Control.BorderBrush}">
									<ContentPresenter
										x:Name="HeaderContent"
										Content="{TemplateBinding ContentControl.Content}"
										ContentTemplate="{TemplateBinding ContentControl.ContentTemplate}"
										Margin="5,1,5,1"
										VerticalAlignment="{TemplateBinding Control.VerticalContentAlignment}"
										HorizontalAlignment="{TemplateBinding Control.HorizontalContentAlignment}"
										RecognizesAccessKey="True"
										SnapsToDevicePixels="{TemplateBinding UIElement.SnapsToDevicePixels}" />
								</Border>
								<Thumb
									x:Name="PART_HeaderGripper"
									HorizontalAlignment="Right"
									Margin="0,0,0,0"
									Style="{StaticResource GridViewColumnHeaderGripper}" />
							</Grid>
							<ControlTemplate.Triggers>
								<Trigger
									Property="IsPressed"
									Value="True">
									<Setter
										TargetName="HeaderContent"
										Property="Margin"
										Value="6,1,6,1" />
								</Trigger>
								<Trigger
									Property="IsEnabled"
									Value="False">
									<Setter
										Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"
										Property="Foreground" />
								</Trigger>
							</ControlTemplate.Triggers>
						</ControlTemplate>
					</Setter.Value>
				</Setter>
				<Style.Triggers>
					<Trigger
						Property="GridViewColumnHeader.Role"
						Value="Padding">
						<Setter
							Property="Template">
							<Setter.Value>
								<ControlTemplate
									TargetType="{x:Type GridViewColumnHeader}">
									<Border
										Name="HeaderBorder2"
										BorderThickness="0"
										BorderBrush="{TemplateBinding Control.BorderBrush}"
										Background="{TemplateBinding Control.Background}" />
									<ControlTemplate.Triggers>
										<Trigger
											Property="Height"
											Value="Auto">
											<Setter
												Property="MinHeight"
												Value="20" />
										</Trigger>
									</ControlTemplate.Triggers>
								</ControlTemplate>
							</Setter.Value>
						</Setter>
					</Trigger>
				</Style.Triggers>
			</Style>
			<Style
				x:Key="ListViewStyleForUC"
				TargetType="{x:Type ListViewItem}">
				<Style.Setters>
					<Setter
						Property="UIElement.SnapsToDevicePixels"
						Value="False" />
					<Setter
						Property="HorizontalContentAlignment"
						Value="Stretch" />
					<Setter
						Property="Height"
						Value="40" />
					<Setter
						Property="Padding"
						Value="0" />
					<Setter
						Property="Margin"
						Value="0" />
					<Setter
						Property="Foreground"
						Value="{DynamicResource TextBrushWhiteAndBlack}" />
					<Setter
						Property="BorderThickness"
						Value="0" />
					<Setter
						Property="Template">
						<Setter.Value>
							<ControlTemplate
								TargetType="{x:Type ListViewItem}">
								<Grid>
									<Border
										x:Name="bd"
										Background="{DynamicResource ListViewBackground2}"
										BorderThickness="0"
										Height="{TemplateBinding FrameworkElement.Height}"
										SnapsToDevicePixels="True">
										<GridViewRowPresenter
											HorizontalAlignment="Stretch" />
									</Border>
								</Grid>
								<ControlTemplate.Triggers>
									<Trigger
										Property="ListBoxItem.IsSelected"
										Value="True">
										<Trigger.Setters>
											<Setter
												TargetName="bd"
												Value="{DynamicResource ListViewIsSelected}"
												Property="Border.Background" />
										</Trigger.Setters>
									</Trigger>
									<MultiTrigger>
										<MultiTrigger.Conditions>
											<Condition
												Property="UIElement.IsMouseOver"
												Value="True" />
											<Condition
												Property="ListBoxItem.IsSelected"
												Value="False" />
										</MultiTrigger.Conditions>
										<Setter
											TargetName="bd"
											Value="{DynamicResource ListViewMouseOver}"
											Property="Border.Background" />
									</MultiTrigger>
								</ControlTemplate.Triggers>
							</ControlTemplate>
						</Setter.Value>
					</Setter>
				</Style.Setters>
			</Style>
			<Models:RecoverStatusToStr
				x:Key="RecoverStatusToStr" />
			<Models:RecoverStatusImage
				x:Key="RecoverStatusImage" />
			<Models:RecoverToOperationBtnVisibility
				x:Key="RecoverToOperationBtnVisibility" />
			<Models:DiscardEnable
				x:Key="DiscardEnable" />
			<Models:RecoverBtnEnable
				x:Key="RecoverBtnEnable" />
			<Models:RecoverCheckEnable
				x:Key="RecoverCheckEnable" />
		</ResourceDictionary>
	</FrameworkElement.Resources>
	<FrameworkElement.DataContext>
		<ViewModels:RecoverViewModel />
	</FrameworkElement.DataContext>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition
				Width="20" />
			<ColumnDefinition
				Width="*" />
			<ColumnDefinition
				Width="20" />
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition
				Height="20" />
			<RowDefinition
				Height="Auto" />
			<RowDefinition
				Height="20" />
			<RowDefinition
				Height="*" />
			<RowDefinition
				Height="20" />
			<RowDefinition
				Height="Auto" />
			<RowDefinition
				Height="20" />
		</Grid.RowDefinitions>
		<TextBlock
			Text="{x:Static localprop:Resources.WInMainDatailLableText}"
			FontSize="12"
			Foreground="{DynamicResource TextBrushWhiteAndBlack}"
			Grid.Row="1"
			Grid.Column="1"
			TextWrapping="Wrap" />
		<ListView
			x:Name="RecoverView"
			Grid.Row="3"
			Grid.Column="1"
			BorderThickness="1"
			BorderBrush="{DynamicResource MainSideBarBackground}"
			SelectionMode="Single"
			Background="{DynamicResource MainViewListItemSeleted}"
			ItemsSource="{Binding RecoverFileList}"
			SelectedItem="{Binding SelectedRecoverFileItem}"
			SelectionChanged="RecoverView_SelectionChanged">
			<ItemsControl.ItemContainerStyle>
				<Style
					TargetType="{x:Type ListViewItem}">
					<Setter
						Property="HorizontalContentAlignment"
						Value="Stretch" />
					<Setter
						Property="VerticalContentAlignment"
						Value="Center" />
					<Setter
						Property="Height"
						Value="32" />
					<Setter
						Property="BorderThickness"
						Value="0,0.5,0,0.5" />
					<Setter
						Property="Margin"
						Value="0" />
					<Setter
						Property="BorderBrush"
						Value="{DynamicResource MainSideBarBackground}" />
					<Setter
						Property="Background"
						Value="{DynamicResource MainViewListItemSeleted}" />
					<Setter
						Property="Template">
						<Setter.Value>
							<ControlTemplate
								TargetType="{x:Type ListViewItem}">
								<Grid>
									<Border
										x:Name="bd"
										Background="{DynamicResource ListViewBackground2}"
										BorderThickness="0"
										Height="{TemplateBinding FrameworkElement.Height}"
										SnapsToDevicePixels="True">
										<GridViewRowPresenter
											HorizontalAlignment="Stretch" />
									</Border>
								</Grid>
								<ControlTemplate.Triggers>
									<Trigger
										Property="ListBoxItem.IsSelected"
										Value="True">
										<Trigger.Setters>
											<Setter
												TargetName="bd"
												Value="{DynamicResource ListViewIsSelected}"
												Property="Border.Background" />
										</Trigger.Setters>
									</Trigger>
									<MultiTrigger>
										<MultiTrigger.Conditions>
											<Condition
												Property="UIElement.IsMouseOver"
												Value="True" />
											<Condition
												Property="ListBoxItem.IsSelected"
												Value="False" />
										</MultiTrigger.Conditions>
										<Setter
											TargetName="bd"
											Value="{DynamicResource ListViewMouseOver}"
											Property="Border.Background" />
									</MultiTrigger>
								</ControlTemplate.Triggers>
							</ControlTemplate>
						</Setter.Value>
					</Setter>
				</Style>
			</ItemsControl.ItemContainerStyle>
			<ListView.View>
				<GridView>
					<GridViewColumn
						Header="{x:Static localprop:Resources.WInMainListViewFileNameText}"
						Width="240">
						<GridViewColumn.HeaderTemplate>
							<DataTemplate>
								<StackPanel
									Orientation="Horizontal">
									<CheckBox
										x:Name="selectAllCB"
										IsThreeState="True"
										Margin="8,0,0,0"
										Style="{StaticResource DefaultCheckBoxStyle}"
										HorizontalAlignment="Left"
										VerticalAlignment="Center"
										HorizontalContentAlignment="Center"
										IsChecked="{Binding DataContext.IsAllRecoverFileSelected, ElementName=RecoverView}" />
									<TextBlock
										FontSize="12"
										VerticalAlignment="Center"
										Foreground="{DynamicResource TextBrushWhiteAndBlack}"
										Margin="8,0,0,0"
										Text="{Binding}" />
								</StackPanel>
							</DataTemplate>
						</GridViewColumn.HeaderTemplate>
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<StackPanel
									Orientation="Horizontal">
									<CheckBox
										x:Name="recoverFileItemCB"
										Style="{StaticResource DefaultCheckBoxStyle}"
										VerticalAlignment="Center"
										Margin="8,0,0,0"
										IsChecked="{Binding IsFileSelected, Mode=TwoWay}"
										IsEnabled="{Binding Status, Converter='{StaticResource RecoverCheckEnable}'}"
										Checked="recoverFileItemCB_Checked"
										Unchecked="recoverFileItemCB_Unchecked" />
									<TextBlock
										FontSize="12"
										VerticalAlignment="Center"
										Foreground="{DynamicResource TextBrushWhiteAndBlack}"
										TextTrimming="CharacterEllipsis"
										Margin="8,0,0,0"
										Text="{Binding FileName}"
										ToolTip="{Binding DisplayName}" />
								</StackPanel>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Header="{x:Static localprop:Resources.WInMainListViewLastSavedText}"
						Width="160">
						<GridViewColumn.HeaderTemplate>
							<DataTemplate>
								<TextBlock
									FontSize="12"
									Margin="10,0,0,0"
									Foreground="{DynamicResource TextBrushWhiteAndBlack}"
									Text="{Binding}" />
							</DataTemplate>
						</GridViewColumn.HeaderTemplate>
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<Grid>
									<TextBlock
										FontSize="12"
										TextAlignment="Center"
										Foreground="{DynamicResource TextBrushWhiteAndBlack}"
										HorizontalAlignment="Left"
										VerticalAlignment="Center"
										Margin="0,0,10,0"
										Text="{Binding LastTime, Mode=OneWay}" />
								</Grid>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Header="{x:Static localprop:Resources.WInMainListViewStatusText}"
						Width="140">
						<GridViewColumn.HeaderTemplate>
							<DataTemplate>
								<TextBlock
									FontSize="12"
									Margin="10,0,0,0"
									Foreground="{DynamicResource TextBrushWhiteAndBlack}"
									Text="{Binding}" />
							</DataTemplate>
						</GridViewColumn.HeaderTemplate>
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<StackPanel
									Orientation="Horizontal">
									<Image
										Height="12"
										Width="12"
										Source="{Binding Status, Converter='{StaticResource RecoverStatusImage}', Mode=OneWay}" />
									<TextBlock
										FontSize="12"
										VerticalAlignment="Center"
										Foreground="{DynamicResource TextBrushWhiteAndBlack}"
										Margin="8,0,0,0"
										Text="{Binding Status, Converter='{StaticResource RecoverStatusToStr}', Mode=OneWay}" />
								</StackPanel>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
					<GridViewColumn
						Header="{x:Static localprop:Resources.WInMainListViewActionText}"
						Width="120">
						<GridViewColumn.HeaderTemplate>
							<DataTemplate>
								<TextBlock
									FontSize="12"
									Margin="10,0,0,0"
									Foreground="{DynamicResource TextBrushWhiteAndBlack}"
									Text="{Binding}" />
							</DataTemplate>
						</GridViewColumn.HeaderTemplate>
						<GridViewColumn.CellTemplate>
							<DataTemplate>
								<StackPanel
									Orientation="Horizontal"
									HorizontalAlignment="Left"
									Margin="0,0,0,0">
									<Button
										x:Name="openFileBtn"
										Width="20"
										Height="20"
										Margin="0,0,10,0"
										BorderThickness="0"
										Style="{StaticResource DefaultButtonStyle}"
										Background="#00FFFFFF"
										Tag="{Binding RecoverFullFileName}"
										Visibility="{Binding Status, Converter='{StaticResource RecoverToOperationBtnVisibility}', Mode=OneWay}"
										Click="OpenFileBtn_Click">
										<Image
											Width="18"
											Height="18"
											Source="{DynamicResource RecoverWinOpenFileImageSource}" />
									</Button>
									<Button
										x:Name="openDirBtn"
										Width="20"
										Height="20"
										Margin="0,0,10,0"
										BorderThickness="0"
										Style="{StaticResource DefaultButtonStyle}"
										Background="#00FFFFFF"
										Tag="{Binding RecoverFullFileName}"
										Visibility="{Binding Status, Converter='{StaticResource RecoverToOperationBtnVisibility}', Mode=OneWay}"
										Click="OpenDirBtn_Click">
										<Image
											Width="18"
											Height="18"
											Source="{DynamicResource RecoverWinOpenDirImageSource}" />
									</Button>
								</StackPanel>
							</DataTemplate>
						</GridViewColumn.CellTemplate>
					</GridViewColumn>
				</GridView>
			</ListView.View>
		</ListView>
		<Grid
			Row="5"
			Column="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition
					Width="Auto" />
				<ColumnDefinition
					Width="*" />
				<ColumnDefinition
					Width="Auto" />
				<ColumnDefinition
					Width="20" />
				<ColumnDefinition
					Width="Auto" />
			</Grid.ColumnDefinitions>
			<TextBlock
				Text="{x:Static localprop:Resources.WInMainOutputLabelText}"
				Background="{DynamicResource SolidBrushWhiteAndBlack}"
				Foreground="{DynamicResource TextBrushWhiteAndBlack}"
				FontSize="12"
				VerticalAlignment="Center"
				Grid.Column="0" />
			<control:SaveFolderTextBox
				x:Name="LocationTextBox"
				Width="260"
				Margin="12,0,0,0"
				Height="32"
				Grid.Column="1"
				FontSize="12"
				Padding="1,2"
				VerticalContentAlignment="Center"
				HorizontalAlignment="Left"
				Foreground="{DynamicResource TextBrushWhiteAndBlack}"
				Background="{DynamicResource SolidBrushWhiteAndBlack}"
				VerticalAlignment="Center"
				Text="{Binding ReoverOutputPath, Mode=TwoWay}" />
			<control:ButtonEx
				x:Name="startBtn"
				Click="StartBtn_Click"
				Grid.Column="2"
				MinWidth="130"
				Height="40"
				BorderThickness="0"
				CornerRadius="4"
				Padding="6,0,6,0"
				HorizontalAlignment="Stretch"
				Background="#2CBE6F"
				MouseOverBackground="#56CB8C"
				MousePressedBackground="#239859"
				DisabledBackground="#C4C4C4"
				Foreground="#FFFFFF"
				MouseOverForeground="#FFFFFF"
				MousePressedForeground="#FFFFFF"
				DisabledForeground="#33000000"
				FontSize="16"
				Content="{x:Static localprop:Resources.WInMainStartRecoverBtnText}">
				<UIElement.IsEnabled>
					<MultiBinding
						Converter="{StaticResource RecoverBtnEnable}">
						<Binding
							Path="Text"
							ElementName="LocationTextBox" />
						<Binding
							Path="SelectedRecoveringCount" />
					</MultiBinding>
				</UIElement.IsEnabled>
			</control:ButtonEx>
			<control:ButtonEx
				x:Name="discardBtn"
				Click="DiscardBtn_Click"
				HorizontalAlignment="Stretch"
				Grid.Column="4"
				MinWidth="130"
				Height="40"
				BorderThickness="1"
				CornerRadius="4"
				Padding="6,0,6,0"
				Background="#FFFFFF"
				DisabledBackground="#C4C4C4"
				MouseOverBackground="#F5F5F5"
				MousePressedBackground="#D2D2D2"
				Foreground="#343434"
				DisabledForeground="#33000000"
				FontSize="16"
				IsEnabled="{Binding Path=SelectedRecoveringCount, Converter='{StaticResource DiscardEnable}', Mode=OneWay}">
				<ContentControl.Content>
					<StackPanel
						Orientation="Horizontal">
						<Image
							Source="/PDFLauncher;component/images/discard.png"
							Width="20"
							Height="20"
							IsEnabled="{Binding Path=SelectedRecoveringCount, Converter='{StaticResource DiscardEnable}', Mode=OneWay}">
							<FrameworkElement.Style>
								<Style
									TargetType="{x:Type Image}">
									<Style.Triggers>
										<Trigger
											Property="IsEnabled"
											Value="True">
											<Setter
												Property="UIElement.Opacity"
												Value="1" />
										</Trigger>
										<Trigger
											Property="IsEnabled"
											Value="False">
											<Setter
												Property="UIElement.Opacity"
												Value="0.2" />
										</Trigger>
									</Style.Triggers>
								</Style>
							</FrameworkElement.Style>
						</Image>
						<TextBlock
							Text="{x:Static localprop:Resources.WInDisCardConfirmDiscardBtn}"
							VerticalAlignment="Center"
							Margin="10,0,0,0"
							IsEnabled="{Binding Path=SelectedRecoveringCount, Converter='{StaticResource DiscardEnable}', Mode=OneWay}">
							<FrameworkElement.Style>
								<Style
									TargetType="{x:Type TextBlock}">
									<Style.Triggers>
										<Trigger
											Property="IsEnabled"
											Value="False">
											<Setter
												Property="Foreground"
												Value="#33000000" />
										</Trigger>
										<Trigger
											Property="IsEnabled"
											Value="True">
											<Setter
												Property="Foreground"
												Value="#343434" />
										</Trigger>
									</Style.Triggers>
								</Style>
							</FrameworkElement.Style>
						</TextBlock>
					</StackPanel>
				</ContentControl.Content>
			</control:ButtonEx>
		</Grid>
	</Grid>
</Window>
